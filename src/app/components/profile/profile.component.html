<div class="profile-page">
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <div class="d-flex w-100 justify-content-center">
        <a class="navbar-brand" routerLink="/homepage" style="font-weight: bold"
          >Review Nang</a
        >
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" style="font-weight: bold">Search</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" style="font-weight: bold">{{
              currentUser?.username
            }}</a>
          </li>
          <li class="nav-item">
            <app-user-dropdown></app-user-dropdown>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="profile-header">
    <h2>{{ currentUser?.username }}'s Profile</h2>
  </div>

  <div class="profile-content">
    <div class="profile-sidebar">
      <div class="profile-picture-container">
        <div class="profile-picture" (click)="uploadProfilePicture()">
          <span class="add-picture-text">Add Picture</span>
        </div>
      </div>

      <div class="profile-info">
        <div class="info-item">
          <span class="info-label">Joined :</span>
          <span class="info-value">{{ joinDate }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Status :</span>
          <span class="info-value status-online">
            <span class="status-dot"></span>
            Online
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">Friends</span>
          <span class="info-value">All ({{ friendCount }})</span>
        </div>
      </div>
    </div>

    <div class="profile-main">
      <div class="profile-section">
        <div class="section-header">
          <h3>History</h3>
        </div>
        <div class="movie-list">
          <div class="movie-item" *ngFor="let movie of historyMovies">
            <img
              [src]="movie.imageUrl"
              [alt]="movie.title"
              [routerLink]="['/movie', movie.title]"
            />
          </div>
        </div>
      </div>

      <div class="profile-section">
        <div class="section-header">
          <h3>Favorites</h3>
          <a class="view-all-link" (click)="viewAllFavorites()"
            >All Favorites</a
          >
        </div>
        <div class="movie-list">
          <div class="movie-item" *ngFor="let movie of favoriteMovies">
            <img
              [src]="movie.imageUrl"
              [alt]="movie.title"
              [routerLink]="['/movie', movie.title]"
            />
          </div>
        </div>
      </div>

      <div class="profile-section">
        <div class="section-header">
          <h3>Comments</h3>
          <a class="view-all-link" (click)="viewAllComments()">All Comments</a>
        </div>
        <div class="comment-editor">
          <div class="editor-toolbar">
            <button class="toolbar-btn" title="Bold">
              <strong>B</strong>
            </button>
            <button class="toolbar-btn" title="Italic">
              <em>I</em>
            </button>
            <button class="toolbar-btn" title="Underline">
              <u>U</u>
            </button>
            <button class="toolbar-btn" title="Align Left">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"
                />
              </svg>
            </button>
            <button class="toolbar-btn" title="Align Center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"
                />
              </svg>
            </button>
            <button class="toolbar-btn" title="Insert Image">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />
                <path
                  d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"
                />
              </svg>
            </button>
            <button class="toolbar-btn" title="Insert Link">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path
                  d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"
                />
                <path
                  d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"
                />
              </svg>
            </button>
          </div>
          <textarea
            placeholder="Write a new comment"
            [(ngModel)]="commentText"
          ></textarea>
          <button class="submit-btn" (click)="submitComment()">
            Submit Comment
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
